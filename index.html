<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video-js.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@1.0.1/dist/videojs-mobile-ui.css" rel="stylesheet"/>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      height: 100%;
      overflow: hidden;
    }

    .player-container {
      position: relative;
      width: 100%;
      height: 100vh;
      background: #000;
    }

    .video-js {
      position: absolute;
      inset: 0;
      width: 100% !important;
      height: 100% !important;
    }

    /* Водяний знак */
    .player-watermark {
      position: absolute;
      inset: 0;
      pointer-events: none;
      user-select: none;
      z-index: 999999;           /* дуже високий */
      opacity: 0.85;
    }

    .player-watermark img {
      position: absolute;
      top: 1.5%;
      right: 1.5%;
      width: clamp(80px, 14vw, 220px);
      height: auto;
      filter: 
        drop-shadow(0 0 4px rgba(0,0,0,0.9)) 
        drop-shadow(0 0 8px rgba(0, 140, 255, 0.6));
      opacity: 0.9;
      pointer-events: none;
    }

    /* ───── Повноекранний режим ───── */
    :fullscreen .player-watermark,
    :-webkit-full-screen .player-watermark,
    .vjs-fullscreen .player-watermark {
      position: fixed !important;
      inset: 0 !important;
      z-index: 2147483640 !important;
      pointer-events: none !important;
    }

    :fullscreen .player-watermark img,
    :-webkit-full-screen .player-watermark img,
    .vjs-fullscreen .player-watermark img {
      top: 1.2% !important;
      right: 1.5% !important;
      width: clamp(100px, 16vw, 280px) !important;
      filter: 
        drop-shadow(0 0 6px rgba(0,0,0,0.95)) 
        drop-shadow(0 0 10px rgba(0, 160, 255, 0.7)) !important;
    }

    @media (max-width: 640px) {
      .player-watermark img {
        top: 1%;
        right: 2%;
        width: clamp(70px, 20vw, 160px);
      }
    }

    /* Додатковий захист для деяких браузерів */
    .player-watermark {
      will-change: transform;
      transform: translateZ(0);
    }
  </style>
</head>

<body>

<div class="player-container">
  <video-js
    id="video-player"
    class="vjs-luxmty vjs-16-9 vjs-show-big-play-button-on-pause"
    controls
    preload="auto"
    playsinline
    poster="https://raw.githubusercontent.com/EmilioSG11/videojs-cosmos-skin/main/images/bbunny.jpg"
  >
    <source src="https://bitcdn-kronehit.bitmovin.com/v2/hls/chunklist.m3u8" type="application/x-mpegURL" />
  </video-js>

  <div class="player-watermark" id="wm">
    <img 
      src="https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png?rlkey=zp6loeqvic2bsve388qei887o" 
      alt="watermark"
      draggable="false"
    >
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@1.0.1/dist/videojs-mobile-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/EmilioSG11/videojs-hls-quality-selector@main/dist/videojs-hls-quality-selector.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-logo@3.0.0/dist/videojs-logo.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-contextmenu-ui@7.0.0/dist/videojs-contextmenu-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-contrib-quality-menu@1.0.1/dist/videojs-contrib-quality-menu.js"></script>

<script>
const player = videojs("video-player", {
  liveui: true,
  responsive: true,
  fluid: false
});

player.mobileUi();
player.hlsQualitySelector({ displayCurrentQuality: true });
player.contextmenuUI();

player.logo({
  image: "https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png?rlkey=zp6loeqvic2bsve388qei887o",
  url: "https://google.com"
});

// Водяний знак — критична частина
(function(){
  const wm = document.getElementById("wm");
  const playerEl = player.el();  // це .video-js

  // Переміщуємо водяний знак всередину плеєра (дуже важливо!)
  if (playerEl && wm && wm.parentNode !== playerEl) {
    playerEl.appendChild(wm);
  }

  // Показуємо відразу
  wm.style.display = "block";
  wm.style.opacity = "1";

  // Оновлюємо позицію при зміні стану
  function adjustWatermark() {
    // можна додати додаткову логіку за потребою
  }

  player.on("fullscreenchange", adjustWatermark);
  window.addEventListener("resize", adjustWatermark);
  document.addEventListener("fullscreenchange", adjustWatermark);
  document.addEventListener("webkitfullscreenchange", adjustWatermark);

  setTimeout(adjustWatermark, 500);
})();
</script>

</body>
</html>
