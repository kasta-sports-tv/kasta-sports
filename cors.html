<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Video JS з водяним знаком</title>
  <meta name="robots" content="noindex">
  
  <link href="https://darkibox.com/player/videojs7/video-js.css" rel="stylesheet">
  <link rel="stylesheet" href="https://darkibox.com/node_modules/videojs-brand/dist/videojs-brand.css">
  <link href="https://darkibox.com/player/videojs7/videojs-quality-menu.css" rel="stylesheet">
  <link href="https://darkibox.com/player/videojs7/silvermine-videojs-chromecast.css" rel="stylesheet">
  <link href="https://darkibox.com/player/videojs7/silvermine-videojs-airplay.css" rel="stylesheet">

  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
    }

    .player-container {
      position: relative;
      width: 100%;
      height: 100vh;
      background: #000;
    }

    .video-js {
      width: 100% !important;
      height: 100% !important;
    }

    .player-container video,
    .player-container .video-js {
      position: absolute;
      top: 0;
      left: 0;
      width: 100% !important;
      height: 100% !important;
      object-fit: contain !important;
      background: #000 !important;
    }

    .vjs-control-bar {
      background: rgba(0,0,0,0.65) !important;
    }

    .vjs-control {
      color: #fff !important;
      transition: all 0.2s ease;
    }

    .vjs-control:hover {
      color: #ff0000 !important;
    }

    .vjs-play-control,
    .vjs-fullscreen-control {
      color: #ff0000 !important;
    }

    .vjs-big-play-button {
      color: #ff0000 !important;
      border: 2px solid #ff0000 !important;
    }

    /* ────────────── Водяний знак ────────────── */
    .video-watermark {
      position: absolute;
      top: 3%;
      right: 3%;
      z-index: 9999;
      pointer-events: none;
      user-select: none;
      filter: drop-shadow(0 0 4px rgba(0,0,0,0.9)) 
              drop-shadow(0 0 8px rgba(0, 180, 255, 0.7));
      transition: all 0.4s ease;
    }

    .video-watermark img {
      width: clamp(80px, 11vw, 220px);
      height: auto;
      display: block;
      opacity: 0.78;
    }

    /* Повноекранний режим */
    .video-js:fullscreen .video-watermark,
    .video-js:-webkit-full-screen .video-watermark,
    .video-js:fullscreen img,
    .video-js:-webkit-full-screen img {
      top: 1.5% !important;
      right: 1.5% !important;
      filter: drop-shadow(0 0 5px rgba(0,0,0,0.95)) 
              drop-shadow(0 0 10px rgba(100, 200, 255, 0.6)) !important;
    }

    .video-js:-webkit-full-screen .video-watermark img {
      width: clamp(90px, 13vw, 280px) !important;
    }

    @media (max-width: 768px) {
      .video-watermark {
        top: 2%;
        right: 4%;
      }
      .video-watermark img {
        width: clamp(60px, 18vw, 140px);
      }
      .video-js:fullscreen .video-watermark,
      .video-js:-webkit-full-screen .video-watermark {
        top: 1% !important;
        right: 3% !important;
      }
    }
  </style>
</head>
<body>

<div class="player-container" id="videoContainer">
  <video
    id="vjsplayer"
    class="video-js vjs-big-play-centered vjs-16-9"
    controls
    preload="auto"
  ></video>

  <!-- Водяний знак -->
  <div class="video-watermark" id="wm">
    <img 
      src="https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png?rlkey=zp6loeqvic2bsve388qei887o"
      alt="watermark"
      draggable="false"
    >
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.20.1/video.min.js"></script>
<script src="https://darkibox.com/player/videojs7/videojs-quality-menu.min.js"></script>
<script src="https://darkibox.com/player/videojs7/silvermine-videojs-chromecast.min.js"></script>
<script src="https://darkibox.com/player/videojs7/silvermine-videojs-airplay.min.js"></script>
<script src="https://darkibox.com/node_modules/videojs-brand/dist/videojs-brand.min.js"></script>

<script>
// Отримуємо параметри
const params = new URLSearchParams(window.location.search);
let videoSrc  = params.get("url");
let posterSrc = params.get("poster");

// fallback
if (!videoSrc) {
  videoSrc = "https://bitcdn-kronehit.bitmovin.com/v2/hls/chunklist.m3u8";
}

let videoType = "application/x-mpegURL";
if (videoSrc.endsWith(".mp4")) videoType = "video/mp4";

const player = videojs('vjsplayer', {
  sources: [{ src: videoSrc, type: videoType }],
  poster: posterSrc || "",
  controlBar: {
    children: [
      'playToggle',
      'volumePanel',
      'currentTimeDisplay',
      'progressControl',
      'liveDisplay',
      'seekToLive',
      'durationDisplay',
      'customControlSpacer',
      'audioTrackButton',
      'pictureInPictureToggle',
      'qualitySelector',
      'fullscreenToggle'
    ]
  },
  plugins: { chromecast: {}, airPlay: {} },
  techOrder: ['chromecast', 'html5']
});

// brand
player.brand({
  image: "https://dl.dropbox.com/scl/fi/6xr4maks63unfiafrhibt/v61srDLWm9ql.gif?rlkey=vuzs4sguck250rg614flfpusi",
  title: "Telegram",
  destination: "javascript:void(0)",
  destinationTarget: "_self"
});

player.qualityMenu({ resolutionLabelBitrates: false, labels: {'620':'UHD'} });

// Водяний знак — переміщуємо в плеєр (на всяк випадок)
(function initWatermark() {
  const wm = document.getElementById("wm");
  const playerEl = document.querySelector(".video-js");

  if (playerEl && wm && wm.parentElement !== playerEl) {
    playerEl.appendChild(wm);
  }

  // Показуємо відразу (можна прибрати, якщо хочете тільки під час відтворення)
  wm.style.opacity = "1";

  // Оновлення позиції при зміні розміру / fullscreen
  function updateWM() {
    // можна додати додаткову логіку за потреби
  }

  window.addEventListener("resize", updateWM);
  document.addEventListener("fullscreenchange", updateWM);
  document.addEventListener("webkitfullscreenchange", updateWM);

  setTimeout(updateWM, 400);
})();

// Fix spacebar
document.addEventListener("keydown", e => {
  if (e.code === "Space" && !e.target.matches("input, textarea, button")) {
    e.preventDefault();
    if (player.paused()) player.play();
    else player.pause();
  }
});
</script>

</body>
</html>
