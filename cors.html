<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- VideoJS -->
  <link href="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video-js.min.css" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@1.0.1/dist/videojs-mobile-ui.css" rel="stylesheet"/>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #000;
      height: 100%;
      overflow: hidden;
    }

    /* Контейнер 16:9 */
    .player-container {
      position: relative;
      width: 100%;
      height: 100vh;           /* ← повна висота екрану */
      max-width: 100vw;
      aspect-ratio: 16 / 9;
      margin: 0 auto;
      background: #000;
      overflow: hidden;
    }

    /* Плеєр заповнює контейнер */
    .video-js {
      position: absolute !important;
      inset: 0 !important;
      width: 100% !important;
      height: 100% !important;
    }

    /* Водяний знак – основні стилі */
    .player-watermark {
      position: absolute;
      inset: 0;                     /* заповнює весь плеєр */
      pointer-events: none;
      z-index: 9999;
      user-select: none;
      -webkit-user-select: none;
      opacity: 0.75;                /* завжди видно, але не надто яскраво */
      transition: opacity 0.4s ease;
    }

    .player-watermark img {
      position: absolute;
      top: 12px;
      left: 12px;
      width: clamp(70px, 11vw, 180px);
      height: auto;
      filter: drop-shadow(0 0 4px #000) drop-shadow(0 0 7px rgba(0,140,255,0.5));
      opacity: 0.88;
    }

    /* Повноекранний режим – примусово перевизначаємо */
    :fullscreen .player-watermark,
    :-webkit-full-screen .player-watermark,
    .vjs-fullscreen .player-watermark {
      position: fixed !important;     /* ← ключовий момент */
      inset: 0 !important;
      z-index: 2147483640 !important;
      opacity: 0.92 !important;
    }

    :fullscreen .player-watermark img,
    :-webkit-full-screen .player-watermark img,
    .vjs-fullscreen .player-watermark img {
      top: 1.2% !important;
      left: 1.2% !important;
      width: clamp(90px, 14vw, 240px) !important;
      filter: drop-shadow(0 0 5px #000) drop-shadow(0 0 9px rgba(0,160,255,0.7)) !important;
    }

    @media (max-width: 640px) {
      .player-watermark img {
        top: 8px;
        left: 8px;
        width: clamp(60px, 16vw, 130px);
      }
      :fullscreen .player-watermark img,
      :-webkit-full-screen .player-watermark img {
        top: 1% !important;
        left: 2% !important;
        width: clamp(80px, 18vw, 160px) !important;
      }
    }
  </style>
</head>

<body>

<div class="player-container">
  <video-js
    id="video-player"
    class="vjs-luxmty vjs-16-9 vjs-show-big-play-button-on-pause"
    controls
    preload="auto"
    playsinline
    poster="https://raw.githubusercontent.com/EmilioSG11/videojs-cosmos-skin/main/images/bbunny.jpg"
  >
    <source src="https://cors.orestlutij9.workers.dev/?url=https://playertv.xyz/site3/video.m3u8" type="application/x-mpegURL" />
  </video-js>

  <!-- Водяний знак -->
  <div class="player-watermark" id="wm">
    <img 
      src="https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png?rlkey=zp6loeqvic2bsve388qei887o" 
      alt="watermark"
      draggable="false"
    >
  </div>
</div>

<!-- VideoJS та плагіни -->
<script src="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@1.0.1/dist/videojs-mobile-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/EmilioSG11/videojs-hls-quality-selector@main/dist/videojs-hls-quality-selector.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-logo@3.0.0/dist/videojs-logo.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-contextmenu-ui@7.0.0/dist/videojs-contextmenu-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-contrib-quality-menu@1.0.1/dist/videojs-contrib-quality-menu.js"></script>

<script>
const player = videojs("video-player", {
  liveui: true,
  responsive: true,
  fluid: false
});

player.mobileUi();
player.hlsQualitySelector({ displayCurrentQuality: true });
player.contextmenuUI();

player.logo({
  image: "https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png?rlkey=zp6loeqvic2bsve388qei887o",
  url: "https://google.com"
});

// Водяний знак – переміщуємо в плеєр та робимо стійким
(function initWatermark() {
  const wm = document.getElementById("wm");
  const playerEl = player.el();   // .video-js елемент

  if (playerEl && wm && wm.parentNode !== playerEl) {
    playerEl.appendChild(wm);
  }

  // Показуємо відразу (можна залишити opacity=0 за замовчуванням і вмикати тільки на play)
  wm.style.opacity = "1";

  function updateWatermarkPosition() {
    // Можна додати додаткову логіку, якщо потрібно
    // наразі головне — position: fixed у :fullscreen
  }

  player.on("fullscreenchange", updateWatermarkPosition);
  window.addEventListener("resize", updateWatermarkPosition);

  // Початкове оновлення
  setTimeout(updateWatermarkPosition, 400);
})();
</script>

</body>
</html>
