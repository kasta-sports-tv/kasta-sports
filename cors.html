<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video-js.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@1.0.1/dist/videojs-mobile-ui.css" rel="stylesheet"/>

<style>
html,body{
margin:0;
background:#000;
}

.player-container{
position:relative;
width:100%;
aspect-ratio:16/9;
}

.video-js{
width:100%!important;
height:100%!important;
}

/* WATERMARK */
.watermark{
position:absolute;
z-index:999999999;
pointer-events:none;
opacity:0;
transition:.3s;
}

.watermark img{
width:120px;
}

/* ПК */
@media(min-width:769px){
.watermark{
top:6%;
right:2%;
}
}

/* телефон */
@media(max-width:768px){
.watermark{
top:4%;
right:4%;
}
}
</style>
</head>

<body>

<div class="player-container">

<video-js
id="video-player"
class="vjs-luxmty vjs-16-9"
controls
preload="auto"
playsinline
poster="https://raw.githubusercontent.com/EmilioSG11/videojs-cosmos-skin/main/images/bbunny.jpg"
>
<source src="https://bitcdn-kronehit.bitmovin.com/v2/hls/chunklist.m3u8" type="application/x-mpegURL"/>
</video-js>

</div>

<script src="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-mobile-ui@1.0.1/dist/videojs-mobile-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/EmilioSG11/videojs-hls-quality-selector@main/dist/videojs-hls-quality-selector.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-logo@3.0.0/dist/videojs-logo.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-contextmenu-ui@7.0.0/dist/videojs-contextmenu-ui.min.js"></script>

<script src="https://dl.dropbox.com/scl/fi/v0ulq6iiu152blz4h4vt9/luxmtyadv.min.js?rlkey=o1bzgv7mh6oa6gamnfwr2fljz"></script>
<script src="https://dl.dropbox.com/scl/fi/ogug37z70m3c93xmcbo2j/demo-luxmty-advanced.js?rlkey=p122gt64kciuh2ufa9h9gvnkn"></script>

<script>
const player = videojs("video-player",{
liveui:true,
responsive:true,
fluid:false
});

player.mobileUi();
player.hlsQualitySelector({displayCurrentQuality:true});
player.contextmenuUI();

/* ===== WATERMARK SYSTEM ===== */

const wm = document.createElement("div");
wm.className="watermark";
wm.innerHTML=`<img src="https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png?rlkey=zp6loeqvic2bsve388qei887o">`;

function attachWatermark(){

const target = player.el();

if(!target.contains(wm)){
target.appendChild(wm);
}

}

/* Чекаємо поки Luxmty дорендерить DOM */
const observer = new MutationObserver(()=>{
attachWatermark();
});

observer.observe(player.el(),{
childList:true,
subtree:true
});

/* показ watermark */
player.on("playing",()=>wm.style.opacity="1");
player.on("pause",()=>wm.style.opacity="1");
player.on("ended",()=>wm.style.opacity="0");

/* fullscreen */
player.on("fullscreenchange",()=>attachWatermark());

</script>

</body>
</html>
