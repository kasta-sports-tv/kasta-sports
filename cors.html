<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- VideoJS CSS -->
<link href="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video-js.min.css" rel="stylesheet" />

<style>
html, body {
    margin: 0;
    padding: 0;
    background: #000;
}

.player-container {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
}

.video-js {
    position: absolute !important;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
}

/* Watermark */
.video-watermark {
    position: absolute;
    pointer-events: none;
    z-index: 9999;
    opacity: 0;
    transition: all 0.3s ease;
}

.video-watermark img {
    width: 100%;
    height: auto;
}
</style>
</head>

<body>

<div class="player-container">

    <video
        id="video-player"
        class="video-js vjs-default-skin"
        controls
        preload="auto"
        playsinline
        poster="https://raw.githubusercontent.com/EmilioSG11/videojs-cosmos-skin/main/images/bbunny.jpg"
        data-setup='{}'
    >
        <source src="https://bitcdn-kronehit.bitmovin.com/v2/hls/chunklist.m3u8" type="application/x-mpegURL">
    </video>

    <!-- Лого -->
    <div class="video-watermark" id="wm">
        <img src="https://dl.dropbox.com/scl/fi/5f91hwjnaxeduve9dpsmv/IMG_20251101_134848.png">
    </div>

</div>

<!-- VideoJS -->
<script src="https://cdn.jsdelivr.net/npm/video.js@8.12.0/dist/video.min.js"></script>
<!-- HLS Quality Selector -->
<script src="https://cdn.jsdelivr.net/gh/videojs/videojs-contrib-quality-levels@2.0.9/dist/videojs-contrib-quality-levels.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/videojs/videojs-http-streaming@2.15.0/dist/videojs-http-streaming.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/peachananr/videojs-hls-quality-selector@1.1.1/dist/videojs-hls-quality-selector.min.js"></script>

<script>
const player = videojs('video-player', {
    fluid: false,
    responsive: true,
    liveui: true
});

// Додаємо HLS Quality Selector
player.hlsQualitySelector({
    displayCurrentQuality: true
});

/* ===== WATERMARK LOGIC ===== */
player.ready(function() {

    const wm = document.getElementById("wm");
    const wmImg = wm.querySelector("img");
    player.el().appendChild(wm);

    const settings = {
        desktop: {
            normal: { width: 120, top: "6%", right: "2%" },
            fullscreen: { width: 120 * 2.5, top: "8%", right: "1%" }
        },
        mobile: {
            normal: { width: 80, top: "3%", right: "4%" },
            fullscreen: { width: 80 * 2.5, top: "5%", right: "7%" }
        }
    };

    function isMobile() { return window.innerWidth <= 768; }
    function isFullscreen() { return player.isFullscreen(); }

    function updateWatermark() {
        let device = isMobile() ? "mobile" : "desktop";
        let mode = isFullscreen() ? "fullscreen" : "normal";
        let cfg = settings[device][mode];

        wmImg.style.width = cfg.width + "px";
        wm.style.top = cfg.top;
        wm.style.right = cfg.right;
    }

    // Показ після старту відео
    player.on("playing", () => wm.style.opacity = "1");
    player.on("pause", () => wm.style.opacity = "1");
    player.on("ended", () => wm.style.opacity = "0");

    player.on("fullscreenchange", updateWatermark);
    window.addEventListener("resize", updateWatermark);

    // Початкове оновлення
    updateWatermark();
});
</script>

</body>
</html>
